[TOCM]

[TOC]

#概要

#内置函数
##max
返回序列或一组值的最大值
```
{{ max(1, 3, 2) }}
{{ max([1, 3, 2]) }}
```

## min
返回序列或一组值的最小值
```
{{ min(1, 3, 2) }}
{{ min([1, 3, 2]) }}
```
##include
在当前模板中引入其它模板，并将该模板已渲染后的内容返回到当前模板。
```
{{ include('template.html') }}
{{ include(some_var) }}
```
##dump
打印一个或多个变量
```
{{ dump(var1, var2, var3) }}
```

##random
从一个字符串或者一个数字或者一个数组中返回一个随机值
```
{{ random(['apple', 'orange', 'citrus']) }}
{# example output: orange #}

{{ random('ABC') }}
{# example output: C #}

{{ random() }}
{# example output: 15386094 (works as the native PHP mt_rand function) #}

{{ random(5) }} 
{# example output: 3 #}
```
##range
返回一个包含整数等差级数的列表数组，可用来实现`for`循环
```
{% for i in range(0, 6, 2) %}
    {{ i }},
{% endfor %}

{# outputs 0, 2, 4, 6, #}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| low  |是  |int |最小值   |
|high |是  |int | 最大值 |
|step |否  |int | 增长间隔，默认：1    |


#CMS扩展函数

##t
将源语言文本翻译成目标语言
>PHP: t($text, $params = [], $lang = null)

```
{{ t("Home") }}
{# output: Home #}

{{ t(text = "Home", lang = 'zh-cn') }}
{# output: 主页 #}

{{ t(text = "Home", lang = 'zh') }}
{# output: 主頁 #}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| text |是  |string |源文本  |
| params |否  |string | 格式化参数，用来替换文本中的占位符    |
| lang |否  |string | 目标语言，默认为网站当前语言，参阅CMS变量文档    |

## active
检查当前栏目是否为激活状态
>PHP: checkActive($cateId = 0)

 - 判断首页是否激活, cateId传0
 - 导航通常显示的是一级栏目, 如果当前在子栏目的页页, 一级栏目导航为激活状态 
 - 文章页会判断文章所属的栏目

```
<li {% if active(33) %}class="active"{% endif %}>
      <a href="{{ siteInfo.site_url }}">栏目33</a>
</li>
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| cateId |是  |int |栏目ID, 首页==0  |



##url
根据指定的路由和QueryString参数生成URL地址
>PHP: url($path, $args = [], $scheme = false)

```
{{ url('cate/index', {'cateId':1, 'page':2}) }}
{# output: /cn/cate?cateId=1&page=2 #}

{{ url('cate/index', {'cateId':1, 'page':2}, true) }}
{# output: http://testcms.gtarcade.com/cn/cate?cateId=1&page=2 #}

{{ url(scheme = 'https', path = 'cate/index', args = {'cateId':1, 'page':2}) }}
{# output: https://testcms.gtarcade.com/cn/cate?cateId=1&page=2 #}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| path |是  |string |路由路径   |
| args |否 |array | QueryString请求参数    |
|scheme  |否  |bool/string | 绝对地址的访问协议：http/https，默认生成相对地址    |


##ad_list
获取广告列表
>PHP: getAdList($pos, $num = 10)

```
{# 从Top广告位取出3条广告 #}
{% set topAdList = ad_list(pos = "Top", num = 3) %}

{# 循环生成广告标题 #}
{% for value in topAdList %}
	...
{% endfor %}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| pos |是  |string |广告位标识   |
|  num|否  |int | 要取出的数量，默认10条   |

##art_list
获取文章列表
> PHP：getArtList($cateId = 0, $offset = 0, $num = 10, $choice = null, $sticky = null,$content=null, $order = 'order', $arrange = 'DESC')

```
{# 从ID为1的栏目里取出6条最新文章 #}
{% set list = art_list(cateId = 1, num = 6) %}

{# 循环展示文章列表 #}
{% for item in list %}
	<li><span><a href="{{ item.cate_url }}"> [{{ item.cate_title }}]</a></span>
		<a href="{{ item.url }}">{{ item.title }}</a>04/10
	</li>
{% endfor %}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| cateId |否  |int |栏目ID   |
| offset |否  |int | 起始位置，默认为0    |
| num |否  |int | 数量，默认为10    |
| choice |否  |int |  精选， 0：否，1：是，默认：不限   |
| sticky |否  |int |  置顶，0：否，1：是，默认：不限   |
| content |否  |int |  是否获取内容 1：是，默认：不获取   |
| order |否  |int |  排序字段，art_id：ID, order：排序字段，默认：order   |
|arrange|否|string| DESC:降序，ASC：升序, 默认: DESC|

##sub_list
获取当前指定栏目ID的子栏目列表
>PHP: getSubList($pid = 0)

```
{# 获取栏目10所有子栏目列表 #}
{% set subList = sub_list(pid = 10) %}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| pid |是  |int |父栏目ID   |


##page_art_list
获取栏目分页文章列表
>PHP: getPageArtList($cateId, $num = 10)

```
{% set pageArtList = page_art_list(cateId = curCateId, num = 2) %}
	{% for value in pageArtList %}
	<p>
		<a href="{{ value.url }}" title="{{ value.title }}">[{{ value.cate_title }}]{{ value.title }}</a>{{ value.pub_time | date("m/d") }} 
	</p>
{% endfor %}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| cateId |是  |int |栏目ID   |
| num | 是  |int | 每页文章数目    |

##page_bar
获取分页标签的HTML内容
> PHP: getPageBar($cateId, $num = 10, $hideOne = true)

```
{{ page_bar(cateId = curCateId, num = 2) }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| cateId |是  |int |栏目ID   |
| num | 是  |int | 每页文章数目    |
|hideOne|否|bool|当只有一页时隐藏

##recommend_servers
推荐服务器
> PHP: recommend_servers($num = 5)
```
{{ recommend_servers(num = 1) }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
|num | 否  |int | 取数据条数 默认:5|

##tz_servers
获取时区下的服务器
> PHP: tz_servers($timeZone)
```
{{ tz_servers(timeZone='America/New_York') }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
|timeZone | 是  |string | 时区    |


##my_servers
获取时区下的服务器
> PHP: my_servers($num = 5)
```
{{ my_servers(num=1) }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
|num | 否  |int | 取数据条数 默认:5   |



