[TOCM]

[TOC]

#概要
过滤器和函数功能很类似，过滤器filters通常是用来修改变量
过滤器的基本语法，用|连接变量和过滤器名
过滤器可以带参数，也可以使用具名参数

#引擎内置过滤器

## date
格式化时间
```
{{ post.published_at|date(format = "m/d/Y") }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| format |否  |string |格式化字符串，详细的标识：[format参数格式](http://php.net/manual/zh/function.date.php "format参数格式")    |
| timezone |否  |string | 默认时区    |


## default
当变量的值为空时，默认显示的字符串
```
{{ var|default('var is not defined') }}

{{ var.foo|default('foo item on var is not defined') }}

{{ var['foo']|default('foo item on var is not defined') }}

{{ ''|default('passed var is empty')  }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| default |是  |string |默认值   |


##e
转义html字符，为了安全默认已经开启了html转义
```
{% set a = "<a href='#'>测试链接</a>"  %}

{# output: &lt;a href=&#039;#&#039;&gt;测试链接&lt;/a&gt;gt; #}
{{a}}
```
##raw
输出原始字符，以下的脚本将会执行，在页面弹出一个alert框：
```
{% set a = "<script>alert(1)</script>"  %}
{{ a | raw}}
```

##first
获取一个数组或者字符串的第一个元素
```
{{ [1, 2, 3, 4]|first }}
{# outputs 1 #}

{{ { a: 1, b: 2, c: 3, d: 4 }|first }}
{# outputs 1 #}

{{ '1234'|first }}
{# outputs 1 #}
```

##last
获取一个数组或者字符串的最后一个元素
```
{{ [1, 2, 3, 4]|last }}
{# outputs 4 #}

{{ { a: 1, b: 2, c: 3, d: 4 }|last }}
{# outputs 4 #}

{{ '1234'|last }}
{# outputs 4 #}
```

##length
获取一个数组或者字符串的长度
```
{{ [1, 2, 3, 4]|length }}
{# output:4 #}

{{ "abcdefg" | length }}
{# output:7 #}
```

##join
用指定的分隔符将一个数组连接成字符串
```
{{ [1, 2, 3]|join }}
{# returns 123 #}

{{ [1, 2, 3]|join('|') }}
{# outputs 1|2|3 #}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| glue |否  |string | 分隔符 |

##split
用指定的分隔符将一个字符串分隔成数组
```
{% set foo = "one,two,three"|split(',') %}
{# foo contains ['one', 'two', 'three'] #}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| delimiter |否  |string |分隔符  |
| limit  |否  |int | 最多的元素数量   |


##json_encode
将一个数组或者对象转成JSON表达式
```
{% set j = {'a':1, 'b':'bbb', 'c':[1, 2, 3]} %}

{{ j|json_encode|raw }}
{# outpu: {"a":1,"b":"bbb","c":[1,2,3]} #}
```
注意：如果不使用`raw`过滤器，则输出的`"`会被转义，生成的json在js里将不可用

##keys
获取一个数组的键值组成的数组
```
{% for key in array|keys %}
    ...
{% endfor %}
```
##lower
将字符串转成小写
```
{{ 'WELCOME'|lower }}

{# outputs 'welcome' #}
```

##upper
将字符串转成大写
{{ 'welcome'|upper }}

{# outputs 'WELCOME' #}

## title
将单词的首字母转成大写
```
{{ 'my first car'|title }}

{# outputs 'My first car' #}
```

##nl2br
将`\n`换行符转成`<br>`标签
```
{{ "I like Twig.\nYou will like it too."|nl2br }}
{# outputs
    I like Twig.<br />
    You will like it too.
#}
```

##trim
去除字符串两端的空格
```
{{ '  I like Twig.  '|trim }}

{# outputs 'I like Twig.' #}
```

#CMS扩展过滤器


##t
将源语言文本翻译成目标语言
```
{{ "Home" | t }}
```
>**参数列表**

|参数名|必选|类型|说明|
|:---- |:---|:----- |----- |
| text |是  |string |源文本  |
| params |否  |string | 格式化参数，用来替换文本中的占位符    |
| lang |否  |string | 目标语言，默认为网站当前语言    |







